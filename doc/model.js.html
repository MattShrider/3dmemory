<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** 
 * @file js/model.js This is the "model" of the model, view, controller system.
 * @author Matthew Shrider &lt;mattshrider@gmail.com>
 */

/** 
* Model namespace for encapsulating the model data of the simulation.
* @namespace model
* */
var model = {
   /** How large the pages are in bytes */
   pagesize: 512,
   /** The list of processes in the model */
   procs: [],
   /** An object representing physical memory */
   memory: {
      size: 4*1024,
      frames: []
   },
   /**
    * @method addProc
    * Adds a process to the Process list
    * @param {int} id The id of the process.
    * @param {int} text The amount of bytes in the text segment.
    * @param {int} data The amount of bytes in the data segment.
    * @memberof model
    */
   addProc: function(id, text, data){
      this.procs[this.procs.length] = new this.Proc(id, text, data);
   },
   /**
    * @method removeProc
    * Removes a process from the process list
    * @param {int} id Which process id should be removed from the list.
    * @memberof model
    */
   removeProc: function(id){
      for (var i=0; i &lt; this.procs.length; ++i){
         if(this.procs[i].equals(id)){
            this.procs.splice(i,1);
         }
      }
   }
};

/** 
 * Represents a process in the simulation.
 * @constructor
 * @param {int} id The process id.
 * @param {int} text The size of the process text in bytes.
 * @param {int} data The size of the process data in bytes.
 */
model.Proc = function(id, text, data){
   this.id = id;
   var textsize = text;
   var datasize = data;
   var pagesize = model.pagesize;
   /** The amount of data pages in the process. */
   var datapages = Math.ceil(datasize/pagesize);
   /** The amount of text pages in the process. */
   var textpages = Math.ceil(textsize/pagesize);
   /** Array which represents the page table of the proc. */
   var pageTable = [];

   /* Creates the text pages for the process */
   for(var i=0, counter = textsize; counter > 0; i++){
      if (counter > pagesize){
         pageTable[i] = new this.Page('text', pagesize);
      } else {
         pageTable[i] = new this.Page('text', counter);
      }
      counter -= pagesize;
   }

   /* Creates the data pages for the process */
   for(i=pageTable.length, counter = datasize; counter > 0; i++){
      if (counter > pagesize){
         pageTable[i] = new this.Page('data', pagesize);
      } else {
         pageTable[i] = new this.Page('data', counter);
      }
      counter -= pagesize;
   }
};

/**
 * @method equals
 * A process is equal to another one if the id matches.
 * @memberof model.Proc#
 */
model.Proc.prototype.equals = function(id){
   return this.id === id;
};

/**
 * Represents a page in logical memory.
 * @constructor
 * @param {String} type Either 'text' or 'data' page.
 * @param {int} size The size of the page, upto {@link model.pagesize}.
 */
model.Page = function(type, size){
   this.type = type;
   this.size = size;
};

/**
 * Represents a frame in physical memory.
 * @constructor
 * @param {int} pid The id of the process which "owns" the frame.
 * @param {String} type Either 'text' or 'data' frame.
 * @param {int} page Which page in logical memory the frame represents.
 */
model.Frame = function(pid, type, page){
   this.pid = pid;
   this.type = type;
   this.page = page;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="model.Frame.html">Frame</a></li><li><a href="model.Page.html">Page</a></li><li><a href="model.Proc.html">Proc</a></li></ul><h3>Namespaces</h3><ul><li><a href="model.html">model</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Sun Mar 23 2014 13:18:02 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
